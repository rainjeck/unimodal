/**
 * License: MIT
 * Description: Simple vanilla javascript modal
 * Author: Tishuk Nadezda
 * Homepage:
 */

{"version":3,"sources":["Unimodal.js"],"names":["Unimodal","opts","params","scrollWindow","hash","onOpen","onClose","init","showHashModal","document","addEventListener","e","target","closest","preventDefault","button","id","getAttribute","open","modal","close","closePrevious","disableScroll","getElementById","classList","add","scrollTop","checkModalHeight","setHash","remove","enableScroll","body","modalElem","modalBody","querySelector","windowHeight","window","innerHeight","modalBodyHeight","offsetHeight","opened","scroll","pageYOffset","location","scrollTo","callback","prototype"],"mappings":"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","sourcesContent":["export default class Unimodal {\r\n  constructor( opts = {} ) {\r\n    let params = opts || {};\r\n\r\n    this.scrollWindow = params.scrollWindow || false; // disabled scroll window\r\n    this.hash = params.hash || false; // hash support\r\n\r\n    this.onOpen = params.onOpen || ''; // after Open\r\n    this.onClose = params.onClose || ''; // after Close\r\n\r\n    this.init();\r\n\r\n    if ( this.hash ) {\r\n      this.showHashModal();\r\n    }\r\n  }\r\n\r\n  init() {\r\n    document.addEventListener('click', e => {\r\n      if ( !e.target.closest('[data-unimodal-open]') ) return;\r\n\r\n      e.preventDefault();\r\n\r\n      const button = e.target.closest('[data-unimodal-open]');\r\n\r\n      const id = button.getAttribute('data-unimodal-open');\r\n\r\n      this.open( id, button );\r\n    });\r\n\r\n    document.addEventListener('click', e => {\r\n      if ( e.target.closest('[data-unimodal-close]') ||\r\n        ( !e.target.closest('[data-unimodal-body]') && e.target.closest('[data-unimodal]') )\r\n      ) {\r\n        const modal = e.target.closest('[data-unimodal]');\r\n\r\n        const id = modal.id;\r\n\r\n        this.close( id );\r\n\r\n        return;\r\n      }\r\n\r\n      return;\r\n    });\r\n  }\r\n\r\n  open( id, button = '' ) {\r\n    this.closePrevious();\r\n\r\n    if ( !this.scrollWindow ) {\r\n      this.disableScroll();\r\n    }\r\n\r\n    const modal = document.getElementById(id);\r\n\r\n    modal.classList.add('is-active');\r\n\r\n    modal.scrollTop = 0;\r\n\r\n    if ( this.checkModalHeight( modal ) ) {\r\n      this.disableScroll();\r\n    }\r\n\r\n    this.setHash( modal.id );\r\n\r\n    if (this.onOpen && typeof this.onOpen === 'function') {\r\n      this.onOpen( modal, button );\r\n    }\r\n  }\r\n\r\n  close( id ) {\r\n    const modal = document.getElementById(id);\r\n\r\n    modal.classList.remove('is-active');\r\n\r\n    this.enableScroll();\r\n\r\n    if ( this.hash ) {\r\n      this.setHash();\r\n    }\r\n\r\n    if (this.onClose && typeof this.onClose === 'function') {\r\n      this.onClose( modal );\r\n    }\r\n  }\r\n\r\n  disableScroll() {\r\n    document.body.classList.add('is-unimodal-active');\r\n  }\r\n\r\n  enableScroll() {\r\n    document.body.classList.remove('is-unimodal-active');\r\n  }\r\n\r\n  checkModalHeight( modalElem ) {\r\n    const modalBody = modalElem.querySelector('[data-unimodal-body]');\r\n    const windowHeight = window.innerHeight;\r\n    const modalBodyHeight = modalBody.offsetHeight;\r\n\r\n    if ( modalBodyHeight > windowHeight ) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  closePrevious() {\r\n    const opened = document.querySelector('[data-unimodal].is-active');\r\n\r\n    if ( opened ) {\r\n      const id = opened.id;\r\n      this.close( id );\r\n    }\r\n  }\r\n\r\n  setHash( hash = '' ) {\r\n    if ( !this.hash ) return;\r\n\r\n    const scroll = window.pageYOffset;\r\n    window.location.hash = hash;\r\n    window.scrollTo(0, scroll);\r\n  }\r\n\r\n  showHashModal() {\r\n    if ( !window.location.hash ) return;\r\n\r\n    const hash = window.location.hash;\r\n\r\n    const modal = document.querySelector(hash);\r\n\r\n    if ( modal ) {\r\n      this.open( modal.id );\r\n    }\r\n  }\r\n}\r\n\r\nUnimodal.open = ( id, callback ) => {\r\n  Unimodal.prototype.open( id );\r\n\r\n  if (callback && typeof callback === 'function') {\r\n    callback();\r\n  }\r\n}\r\n\r\nUnimodal.close = ( id, callback ) => {\r\n  Unimodal.prototype.close( id );\r\n\r\n  if (callback && typeof callback === 'function') {\r\n    callback();\r\n  }\r\n}\r\n"],"file":"../src/unimodal.js"}