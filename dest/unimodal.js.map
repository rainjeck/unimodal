/**
 * License: MIT
 * Description: Simple vanilla javascript modal
 * Author: Tishuk Nadezda
 * Homepage: https://rainjeck.github.io/unimodal/
 */

{"version":3,"file":"../src/unimodal.js","names":["Unimodal","opts","params","scrollWindow","hash","onOpen","onClose","init","showHashModal","document","addEventListener","e","target","closest","preventDefault","button","id","getAttribute","openModal","modal","closeModal","closePrevious","disableScroll","getElementById","classList","add","scrollTop","checkModalHeight","setHash","remove","enableScroll","documentElement","modalElem","modalBody","querySelector","windowHeight","window","innerHeight","modalBodyHeight","offsetHeight","opened","close","callback","scroll","pageYOffset","location","scrollTo","open","prototype","closeAll"],"sources":["Unimodal.js"],"sourcesContent":["class Unimodal {\r\n  constructor(opts = {}) {\r\n    let params = opts || {};\r\n\r\n    this.scrollWindow = params.scrollWindow || false; // disabled scroll window\r\n    this.hash = params.hash || false; // hash support\r\n\r\n    this.onOpen = params.onOpen || ''; // after Open\r\n    this.onClose = params.onClose || ''; // after Close\r\n\r\n    this.init();\r\n\r\n    if (this.hash) {\r\n      this.showHashModal();\r\n    }\r\n  }\r\n\r\n  init() {\r\n    // Open\r\n    document.addEventListener('click', e => {\r\n      if (!e.target.closest('[data-unimodal-open]')) return;\r\n\r\n      e.preventDefault();\r\n\r\n      const button = e.target.closest('[data-unimodal-open]');\r\n\r\n      const id = button.getAttribute('data-unimodal-open');\r\n\r\n      this.openModal(id, button);\r\n\r\n      return;\r\n    });\r\n\r\n    // Close\r\n    document.addEventListener('click', e => {\r\n      if (e.target.closest('[data-unimodal-close]') ||\r\n        (!e.target.closest('[data-unimodal-body]') && e.target.closest('[data-unimodal]') && !e.target.closest('[data-unimodal-static]'))\r\n      ) {\r\n        const modal = e.target.closest('[data-unimodal]');\r\n\r\n        const id = modal.id;\r\n\r\n        this.closeModal(id);\r\n\r\n        return;\r\n      }\r\n\r\n      return;\r\n    });\r\n  }\r\n\r\n  openModal(id, button = '') {\r\n    this.closePrevious();\r\n\r\n    if (!this.scrollWindow) {\r\n      this.disableScroll();\r\n    }\r\n\r\n    const modal = document.getElementById(id);\r\n\r\n    modal.classList.add('is-active');\r\n\r\n    modal.scrollTop = 0;\r\n\r\n    if (this.checkModalHeight(modal)) {\r\n      this.disableScroll();\r\n    }\r\n\r\n    this.setHash(modal.id);\r\n\r\n    if (this.onOpen) {\r\n      this.onOpen(modal, button);\r\n    }\r\n  }\r\n\r\n  closeModal(id) {\r\n    const modal = document.getElementById(id);\r\n\r\n    modal.classList.remove('is-active');\r\n\r\n    this.enableScroll();\r\n\r\n    if (this.hash) {\r\n      this.setHash();\r\n    }\r\n\r\n    if (this.onClose) {\r\n      this.onClose(modal);\r\n    }\r\n  }\r\n\r\n  disableScroll() {\r\n    document.documentElement.classList.add('is-unimodal-active');\r\n  }\r\n\r\n  enableScroll() {\r\n    document.documentElement.classList.remove('is-unimodal-active');\r\n  }\r\n\r\n  checkModalHeight(modalElem) {\r\n    const modalBody = modalElem.querySelector('[data-unimodal-body]');\r\n    const windowHeight = window.innerHeight;\r\n    const modalBodyHeight = modalBody.offsetHeight;\r\n\r\n    if (modalBodyHeight > windowHeight) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  closePrevious() {\r\n    const opened = document.querySelector('[data-unimodal].is-active');\r\n\r\n    if (opened) {\r\n      this.close(opened.id);\r\n    }\r\n  }\r\n\r\n  closeAll() {\r\n    this.closePrevious();\r\n  }\r\n\r\n  setHash(hash = '') {\r\n    if (!this.hash) return;\r\n\r\n    const scroll = window.pageYOffset;\r\n    window.location.hash = hash;\r\n    window.scrollTo(0, scroll);\r\n  }\r\n\r\n  showHashModal() {\r\n    if (!window.location.hash) return;\r\n\r\n    const hash = window.location.hash;\r\n\r\n    const modal = document.querySelector(hash);\r\n\r\n    if (modal) {\r\n      this.openModal(modal.id);\r\n    }\r\n  }\r\n\r\n  open(id, callback) {\r\n    this.openModal(id);\r\n\r\n    if (callback) {\r\n      callback();\r\n    }\r\n  }\r\n\r\n  close(id, callback) {\r\n    this.closeModal(id);\r\n\r\n    if (callback) {\r\n      callback();\r\n    }\r\n  }\r\n\r\n  closeAll(callback) {\r\n    this.closePrevious();\r\n\r\n    if (callback) {\r\n      callback();\r\n    }\r\n  }\r\n}\r\n\r\n(function () {\r\n  Unimodal.open = (id, callback) => {\r\n    Unimodal.prototype.open(id, callback);\r\n  };\r\n\r\n  Unimodal.close = (id, callback) => {\r\n    Unimodal.prototype.close(id, callback);\r\n  };\r\n\r\n  Unimodal.closeAll = (callback) => {\r\n    Unimodal.prototype.closeAll(callback);\r\n  };\r\n})();\r\n"],"mappings":"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"}