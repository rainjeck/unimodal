/**
 * License: MIT
 * Description: Simple vanilla javascript modal
 * Author: Tishuk Nadezda
 * Homepage: https://rainjeck.github.io/unimodal/
 */

{"version":3,"sources":["Unimodal.js"],"names":["Unimodal","opts","params","scrollWindow","hash","onOpen","onClose","init","showHashModal","document","addEventListener","e","target","closest","preventDefault","button","id","getAttribute","open","modal","close","closePrevious","disableScroll","getElementById","classList","add","scrollTop","checkModalHeight","setHash","remove","enableScroll","body","modalElem","modalBody","querySelector","windowHeight","window","innerHeight","modalBodyHeight","offsetHeight","opened","scroll","pageYOffset","location","scrollTo","callback","prototype"],"mappings":"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","sourcesContent":["class Unimodal {\r\n  constructor( opts = {} ) {\r\n    let params = opts || {};\r\n\r\n    this.scrollWindow = params.scrollWindow || false; // disabled scroll window\r\n    this.hash = params.hash || false; // hash support\r\n\r\n    this.onOpen = params.onOpen || ''; // after Open\r\n    this.onClose = params.onClose || ''; // after Close\r\n\r\n    this.init();\r\n\r\n    if ( this.hash ) {\r\n      this.showHashModal();\r\n    }\r\n  }\r\n\r\n  init() {\r\n    document.addEventListener('click', e => {\r\n      if ( !e.target.closest('[data-unimodal-open]') ) return;\r\n\r\n      e.preventDefault();\r\n\r\n      const button = e.target.closest('[data-unimodal-open]');\r\n\r\n      const id = button.getAttribute('data-unimodal-open');\r\n\r\n      this.open( id, button );\r\n    });\r\n\r\n    document.addEventListener('click', e => {\r\n      if ( e.target.closest('[data-unimodal-close]') ||\r\n        ( !e.target.closest('[data-unimodal-body]') && e.target.closest('[data-unimodal]') && !e.target.closest('[data-unimodal-static]') )\r\n      ) {\r\n        const modal = e.target.closest('[data-unimodal]');\r\n\r\n        const id = modal.id;\r\n\r\n        this.close( id );\r\n\r\n        return;\r\n      }\r\n\r\n      return;\r\n    });\r\n  }\r\n\r\n  open( id, button = '' ) {\r\n    this.closePrevious();\r\n\r\n    if ( !this.scrollWindow ) {\r\n      this.disableScroll();\r\n    }\r\n\r\n    const modal = document.getElementById(id);\r\n\r\n    modal.classList.add('is-active');\r\n\r\n    modal.scrollTop = 0;\r\n\r\n    if ( this.checkModalHeight( modal ) ) {\r\n      this.disableScroll();\r\n    }\r\n\r\n    this.setHash( modal.id );\r\n\r\n    if (this.onOpen && typeof this.onOpen === 'function') {\r\n      this.onOpen( modal, button );\r\n    }\r\n  }\r\n\r\n  close( id ) {\r\n    const modal = document.getElementById(id);\r\n\r\n    modal.classList.remove('is-active');\r\n\r\n    this.enableScroll();\r\n\r\n    if ( this.hash ) {\r\n      this.setHash();\r\n    }\r\n\r\n    if (this.onClose && typeof this.onClose === 'function') {\r\n      this.onClose( modal );\r\n    }\r\n  }\r\n\r\n  disableScroll() {\r\n    document.body.classList.add('is-unimodal-active');\r\n  }\r\n\r\n  enableScroll() {\r\n    document.body.classList.remove('is-unimodal-active');\r\n  }\r\n\r\n  checkModalHeight( modalElem ) {\r\n    const modalBody = modalElem.querySelector('[data-unimodal-body]');\r\n    const windowHeight = window.innerHeight;\r\n    const modalBodyHeight = modalBody.offsetHeight;\r\n\r\n    if ( modalBodyHeight > windowHeight ) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  closePrevious() {\r\n    const opened = document.querySelector('[data-unimodal].is-active');\r\n\r\n    if ( opened ) {\r\n      const id = opened.id;\r\n      this.close( id );\r\n    }\r\n  }\r\n\r\n  setHash( hash = '' ) {\r\n    if ( !this.hash ) return;\r\n\r\n    const scroll = window.pageYOffset;\r\n    window.location.hash = hash;\r\n    window.scrollTo(0, scroll);\r\n  }\r\n\r\n  showHashModal() {\r\n    if ( !window.location.hash ) return;\r\n\r\n    const hash = window.location.hash;\r\n\r\n    const modal = document.querySelector(hash);\r\n\r\n    if ( modal ) {\r\n      this.open( modal.id );\r\n    }\r\n  }\r\n}\r\n\r\nUnimodal.open = ( id, callback ) => {\r\n  Unimodal.prototype.open( id );\r\n\r\n  if (callback && typeof callback === 'function') {\r\n    callback();\r\n  }\r\n}\r\n\r\nUnimodal.close = ( id, callback ) => {\r\n  Unimodal.prototype.close( id );\r\n\r\n  if (callback && typeof callback === 'function') {\r\n    callback();\r\n  }\r\n}\r\n"],"file":"../src/unimodal.js"}